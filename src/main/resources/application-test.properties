# ===================================================================
# TEST CONFIGURATION - application-test.properties
# Location: src/test/resources/application-test.properties
# ===================================================================

# ===================================================================
# APPLICATION NAME
# ===================================================================
spring.application.name=todo-api-test

# ===================================================================
# DATABASE TEST CONFIGURATION
# ===================================================================
# Isolated H2 database for tests
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver

# JPA for tests - more restrictive
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# H2 Console disabled in tests
spring.h2.console.enabled=false

# ===================================================================
# ACTUATOR TEST CONFIGURATION - SIMPLIFIED
# ===================================================================
# Base path
management.endpoints.web.base-path=/actuator

# Exposed endpoints - ONLY the ones needed for testing
management.endpoints.web.exposure.include=health,info,metrics

# Basic health endpoint configuration
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always

# Basic health indicators
management.health.db.enabled=true
management.health.diskspace.enabled=true
management.health.diskspace.threshold=100MB

# REMOVE PROBLEMATIC CONFIGURATIONS for tests
# management.endpoint.health.group.readiness.include=readinessState,db,aplicacao
# management.endpoint.health.group.liveness.include=livenessState,diskSpace

# Basic info endpoint
management.info.env.enabled=false
management.info.java.enabled=true
management.info.os.enabled=false
management.info.git.enabled=false
management.info.build.enabled=false

# ===================================================================
# METRICS - DISABLED FOR TESTS
# ===================================================================
management.metrics.enabled=false
management.prometheus.metrics.export.enabled=false

# ===================================================================
# LOGGING TEST CONFIGURATION
# ===================================================================
# Reduced logs in tests
logging.level.br.com.danilobossanova.todoapp=WARN
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.springframework.boot.actuate=WARN
logging.level.org.springframework.boot.test=WARN

# ===================================================================
# TEST SPECIFIC CONFIGURATION
# ===================================================================
# Disable banner in tests
spring.main.banner-mode=off

# Random port for parallel tests
server.port=0

# Disable Flyway in tests
spring.flyway.enabled=false

# ===================================================================
# SWAGGER/OPENAPI - DISABLED FOR TESTS
# ===================================================================
springdoc.api-docs.enabled=false
springdoc.swagger-ui.enabled=false
