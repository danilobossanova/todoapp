# ===================================================================
# SPRING BOOT CONFIGURATION
# ===================================================================
spring.application.name=todoapp

# ===================================================================
# DATABASE CONFIGURATION
# ===================================================================
spring.datasource.url=jdbc:h2:mem:todoapp
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# H2 Console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false

# ===================================================================
# DISABLE FLYWAY
# ===================================================================
spring.flyway.enabled=false

# ===================================================================
# SERVER CONFIGURATION
# ===================================================================
server.port=8080

# ===================================================================
# OPENAPI/SWAGGER CONFIGURATION
# ===================================================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.try-it-out-enabled=true
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.swagger-ui.use-root-path=true

# ===================================================================
# ACTUATOR CONFIGURATION
# ===================================================================

# Base path for all Actuator endpoints
management.endpoints.web.base-path=/actuator

# Endpoints exposed via HTTP (only the necessary ones for security)
management.endpoints.web.exposure.include=health,info,metrics,prometheus

# ===================================================================
# HEALTH ENDPOINT CONFIGURATION
# ===================================================================
# Main configuration for the Health endpoint
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always
management.endpoint.health.status.order=DOWN,OUT_OF_SERVICE,UP,UNKNOWN

# Timeout for slow health indicators (default: 10s)
management.endpoint.health.logging.slow-indicator-threshold=10s

# ===================================================================
# HEALTH GROUPS - KUBERNETES/CONTAINER SUPPORT
# ===================================================================
# Readiness group - includes custom health indicator
management.endpoint.health.group.readiness.include=readinessState,db,aplicacao
management.endpoint.health.group.readiness.show-details=always

# Liveness group - essential components for operation
management.endpoint.health.group.liveness.include=livenessState,diskSpace
management.endpoint.health.group.liveness.show-details=always

# Enables probes automatically when a Kubernetes environment is detected
management.endpoint.health.probes.enabled=true

# ===================================================================
# HEALTH INDICATORS CONFIGURATION
# ===================================================================
# Enables specific health indicators
management.health.db.enabled=true
management.health.diskspace.enabled=true
management.health.diskspace.threshold=100MB

# Disables unnecessary health indicators
management.health.ping.enabled=false

# ===================================================================
# INFO ENDPOINT CONFIGURATION
# ===================================================================
# Contributors for the info endpoint
management.info.env.enabled=true
management.info.java.enabled=true
management.info.os.enabled=true
management.info.process.enabled=false
management.info.git.enabled=true
management.info.git.mode=simple
management.info.build.enabled=true

# Custom application information
info.aplicacao.nome=TodoApp API
info.aplicacao.versao=1
info.aplicacao.descricao=API REST para gerenciamento de tarefas [TODO]
info.aplicacao.ambiente=desenvolvimento
info.desenvolvedor.nome=Danilo Fernando
info.desenvolvedor.email=danilo.bossanova@hotmail.com
info.tecnologias.java=17
info.tecnologias.spring-boot=3.x
info.tecnologias.banco-dados=H2 Database

# ===================================================================
# METRICS CONFIGURATION
# ===================================================================
# Enables metrics system
management.metrics.enabled=true

# Prometheus metrics export (Spring Boot 3.x)
management.prometheus.metrics.export.enabled=true

# Global tags for all metrics
management.metrics.tags.aplicacao=${spring.application.name}
management.metrics.tags.versao=@project.version@
management.metrics.tags.ambiente=desenvolvimento

# ===================================================================
# OBSERVABILITY CONFIGURATION (Spring Boot 3.x)
# ===================================================================
# Disables tracing for now (can be enabled with Zipkin/Jaeger)
management.tracing.enabled=false

# Key-values for observations
management.observations.key-values.aplicacao=${spring.application.name}
management.observations.key-values.versao=@project.version@

# ===================================================================
# LOGGING CONFIGURATION
# ===================================================================
# Application logs
logging.level.br.com.danilobossanova.todoapp=DEBUG

# Spring Framework logs
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.springdoc=DEBUG

# Specific Actuator logs
logging.level.org.springframework.boot.actuate=INFO

logging.level.br.com.danilobossanova.todoapp.config=INFO

# ===================================================================
# VALIDATION CONFIGURATION
# ===================================================================
spring.jackson.deserialization.fail-on-unknown-properties=false
spring.jackson.serialization.write-dates-as-timestamps=false